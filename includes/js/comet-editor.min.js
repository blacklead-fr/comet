(function(m){m(window.jQuery,window,document)})(function(m,B,r){var H=m(r),M=m(B),N=r.getElementById("comet-editor"),O=m(N),P=M.outerWidth(!0),C=r.getElementById("cpb-content"),I=m(C),k={},J=null,q={id:null,type:null,node:null,state:null},G={range:null,clicked:!1},f={getElement:function(a,b){return"id"===b?r.getElementById(a):r.getElementsByClassName(a)},_get:function(){var a={},b;if(1<B.location.search.length){d;var e=0;for(b=B.location.search.substr(1).split("&");e<b.length;e++){var d=b[e].split("=");
a[unescape(d[0])]=1<d.length?unescape(d[1]):""}}return a},modal:function(a){var b={};"object"!==typeof a&&(a={});a.id=a.id||"comet-modal";a.title=a.title||"Comet";a.position=a.position||"auto";a.tabs=a.tabs||!1;a.content=a.content||!1;a.close=a.close||{};a.close.title=a.close.title||cometdata.ui.cancel;a.close.inner=a.close.inner||"<";a.close["do"]=a.close["do"]||!1;a.done=a.done||{};a.done.title=a.done.title||!1;a.done.inner=a.done.inner||!1;a.done["do"]=a.done["do"]||!1;b.create=function(){var b=
"";"auto"!==a.position&&(b='style="left:'+a.position+'px"');b='<div id="'+a.id+'" class="comet-modalUi '+a.id+'" '+b+">";b=b+'<div class="comet-modalInner"><div class="comet-modalHeader"><div class="comet-modalRow"><div class="comet-modalCol comet-modalTL">'+('<button class="comet-button comet-modalClose" title="'+a.close.title+'">'+a.close.inner+"</button>");b=b+'</div><div class="comet-modalCol comet-modalTL">'+("<span>"+a.title+"</span>");b+='</div><div class="comet-modalCol comet-modalTR">';if("string"===
typeof a.done.inner&&0<a.done.inner.length){var d="string"===typeof a.done.title&&0<a.done.title.length?'title="'+a.done.title+'"':"";b+='<button class="comet-button comet-buttonPrimary comet-modalDone" '+d+">"+a.done.inner+"</button>"}b+="</div></div>";!1!==a.tabs&&(b=b+'<ul class="comet-modalRow comet-modalTabs">'+a.tabs,b+="</ul>");b+='</div><div class="comet-modalContent">';b=!1!==a.content?b+a.content:b+cometdata.messages.unreach;O.append(b+"</div></div></div>")};b.destroy=function(){var b=r.getElementById(a.id);
b&&m(b).remove()};b.init=function(){b.destroy();b.create();m("#"+a.id.trim()).on("click",".comet-modalClose, .comet-modalDone",{opts:a},function(a){var d=a.data.opts;a.preventDefault();b.destroy();m(this).hasClass("comet-modalDone")?d.done.hasOwnProperty("do")&&"function"===typeof d.done["do"]&&d.done["do"](a,this):d.close.hasOwnProperty("do")&&"function"===typeof d.close["do"]&&d.close["do"](a,this)})};b.init()},dialog:{_context:!1,init:function(a){"object"!==typeof a&&(a={});if(!("id"in a)||cometUtils.eval.empty(a.id))return!1;
a.id=a.id.trim();var b=r.getElementById(a.id);a.header=a.header||!1;a.content=a.content||!1;a.close=a.close||{};a.close.title=a.close.title||cometdata.ui.cancel;a.close.icon=a.close.icon||'<span class="cico cico-x"></span>';a.done=a.done||{};a.done.target=a.done.target||!1;a.done["do"]=a.done["do"]||!1;a.done.target=cometUtils.eval.empty(a.done.target)?!1:a.done.target.trim();b&&null!==b&&"object"===typeof b&&b.remove();b=r.createElement("div");b.id=a.id;b.className="comet-dialog comet-dialogGlobal";
var e='<div class="comet-dialogbox"><div class="comet-dialogHeader">'+('<button class="comet-button comet-dialogCloseButton" title="'+a.close.title+'">'+a.close.icon+"</button>");!1!==a.header&&(e+=a.header);e+='</div><div class="comet-dialogContent">';e=!1!==a.content?e+a.content:e+cometdata.messages.unreach;b.innerHTML=e+"</div></div>";r.body.appendChild(b);e=".comet-dialogCloseButton";!1===a.done.target||cometUtils.eval.empty(a.done.target)||(e+=","+a.done.target);m(b).on("click",e,{opts:a},function(a){a.preventDefault();
var d=a.data.opts;if(m(this).hasClass("comet-dialogCloseButton"))return b.remove(),!0;if(d.done.hasOwnProperty("do")&&"function"===typeof d.done["do"]){a=d.done["do"](a,this,f.dialog._context);if(1===a)return!1;b.remove()}})}},node:function(a){return{isNode:function(){return a&&"object"===typeof a?!0:!1},classList:function(){var b;return this.isNode()&&"className"in a&&"object"===typeof(b=a.className.split(" "))?b:[]},hasClass:function(a){var b,d;if(1>(b=this.classList()).length)return!1;for(d=0;d<
b.length;d++)if(b[d]==a)return!0;return!1},removeClass:function(b){var e,d,g=[];if(!(1>(e=this.classList()).length)){for(d=0;d<e.length;d++)e[d]!=b&&(g[g.length]=e[d]);a.className=g.join(" ")}},addClass:function(b){var e=this.classList();if(!this.isNode())return a;e[e.length]=b;a.className=e.join(" ")},closest:function(b){if(!this.isNode())return a;var e=function(a,c){var d="previous"===c?a.previousSibling:a.nextSibling;return f.node(d).isNode()?f.node(d).hasClass(b)?d:e(d,c):!1};var d=e(a,"next");
if(f.node(d).isNode())return d;d=e(a,"previous");return f.node(d).isNode()?d:!1}}},get:{activeMenuButton:function(){var a=r.getElementsByClassName("comet-menuComponentButton"),b;if(!(a&&"object"===typeof a&&"length"in a)||1>a.length)return!1;for(b=0;b<a.length;b++){var e=a[b];if(f.node(e).hasClass("cpb-active"))return e}return!1},node:{style:function(a,b){var e;return"number"!==typeof(a=parseInt(a))||isNaN(a)||"sections"!==b&&"rows"!==b&&"columns"!==b&&"elements"!==b?!1:(e=r.getElementById("cpb-style"+
cometUtils.generate.capitalize(b)+a))&&null!=e&&"object"===typeof e&&"style"===e.nodeName.toLowerCase()?e:!1},child:function(a,b){var e,d;if(!a||"object"!==typeof a||"object"!==typeof a.children||1>a.children.length)return!1;var g=a.children;for(e=0;e<g.length;e++)if((d=g[e])&&"object"===typeof d&&f.node(d).hasClass(b))return d;return!1},children:function(a,b){var e,d,g=[];if(!a||"object"!==typeof a||"object"!==typeof a.children||1>a.children.length)return!1;var c=a.children;for(e=0;e<c.length;e++)(d=
c[e])&&"object"===typeof d&&f.node(d).hasClass(b)&&(g[g.length]=d);return g}},content:function(){var a="",b=r.getElementsByClassName("cpb-elementContent"),e;if(b&&"object"===typeof b&&0<b.length)for(var d=0;d<b.length;d++)(e=b[d])&&"object"===typeof e&&(a+=e.innerHTML);return a}},insert:{html:function(a,b){if("object"!==typeof b||!("html"in b))return!1;var e=a.innerHTML;if(2 in arguments&&"before"===arguments[2])return a.innerHTML=b.html+e,!0;a.innerHTML=e+b.html;return!0},css:function(a,b,e){if("object"!==
typeof e||!("css"in e))return!1;a=f.get.node.style(a,b);!1!==a&&a.parentNode.removeChild(a);m("head").append(e.css);return!0}},generateTabMenu:function(a,b){return'<li class="comet-modalTab"><a class="comet-modalTabRef" href="#'+a+'">'+b+"</a></li>"},generateTabContent:function(a,b){var e='<div id="'+a+'" class="comet-modalTab">';e="string"===typeof b?e+b:e+cometdata.messages.unreach;return e+"</div>"},buildTabs:function(a,b){var e,d,g={};if("object"!==typeof a)return!1;var c=d="";for(e in a){var h=
a[e];if(h.hasOwnProperty("name")&&("items"===e||h.hasOwnProperty("sections")&&"object"===typeof h.sections)&&("items"!==e||h.hasOwnProperty("tabs")&&"object"===typeof h.tabs)){var l="comet-modalTab"+e;var u="items"===e?h.tabs:h.sections;d+=f.generateTabMenu(l,h.name);h=f.buildTab(u,b,e);c+=f.generateTabContent(l,h)}}g.tabs=d;g.content=c;return g},buildTab:function(a,b){var e;if("object"!==typeof a)return"";var d="";if(arguments&&arguments[2]&&"items"===arguments[2]){d+='<div class="comet-editorModalItems"><ul class="comet-edModalItems">';
if("string"===typeof b._items&&0<b._items.length&&"object"===typeof k.items){var g=cometUtils.parse.ids(b._items,"array");for(e=0;e<g.length;e++){var c=parseInt(g[e]);"number"===typeof c&&!isNaN(c)&&c in k.items&&(d+=f.kit.item(c,"title"in k.items[c]?k.items[c].title.trim():""))}}return d+'</ul><div class="comet-edMIAdd"><button class="comet-button comet-buttonPrimary comet-edModalItemAdd"><span class="cico cico-plus"></span></button></div></div>'}for(g in a)e=a[g],"name"in e&&"object"===typeof e.fields&&
(d+='<div class="comet-editorModalSection">',d+='<h4 class="comet-editorModalSectionHeader">'+e.name+"</h4>",d+='<div class="comet-editorModalSectionBody">',d+=f.buildFields(e.fields,b),d+="</div>",d+="</div>");return d},buildFields:function(a,b){var e;if("object"!==typeof a)return"";var d=function(a,c){if("check"in c){var d=c.check.split(":");if("object"===typeof d&&2===d.length&&d[0]in b&&b[d[0]]!=d[1])return!1}return!0};var g="";for(e in a){var c=a[e];var h="comet-modalControlWrap";d(e,c)||(h+=
" comet-modalControlHide");g+='<div class="'+h+'">';"label"in c&&(g+='<div class="comet-modalControlLabel">',g+='<label for="comet-modalField'+e+'">',g+=c.label,"string"===typeof c.desc&&0<c.desc.length&&(g+='<span class="comet-modalTooltip">',g+='<span class="comet-modalTooltipIcon">?</span>',g+='<span class="comet-modalTooltipText">'+c.desc+"</span>",g+="</span>"),g+="</label>",g+="</div>");g+=f.buildField(e,c,b);g+="</div>"}return g},buildField:function(a,b,e){if("object"!==typeof b||"string"!==
typeof b.type)return"";var d=b.type.trim();var g="comet-field comet-rendField";var c="comet-modalField"+a;var h="comet-modalControl comet-modalControl"+cometUtils.generate.capitalize(d);var l="true"===b.responsive?!0:!1;var u='data-type="'+d+'"';"color"===d&&(g+=" comet-fieldColor");"true"==b["switch"]&&(g+=" comet-fieldSwitch");var p=f.getValue(a,b,e);h='<div class="'+h+'">';switch(d){case "editor":case "textarea":if("editor"===d&&(g+=" comet-fieldEditor","option"in b))switch(b.option){case "advanced":g+=
" comet-fieldEditorAdvanced";break;case "force_tag":g+=" comet-fieldEditorForceTag"}h+='<textarea id="'+c+'" name="'+a+'" class="'+g+'" '+u+">"+p+"</textarea>";break;case "range":var n="";"min"in b&&(n+=' min="'+b.min+'"');"max"in b&&(n+=' max="'+b.max+'"');"step"in b&&(n+=' step="'+b.step+'"');h=h+'<div class="comet-editRange"><button class="comet-eRDecrease comet-button">-</button><div class="comet-eRange"><div class="comet-eRLine"></div><div class="comet-eRDragger"></div></div><button class="comet-eRIncrease comet-button">+</button>'+
('<input type="hidden" name="'+a+'" class="'+g+'" value="'+p+'" '+n+" "+u+"/>")+('<div class="comet-eRValueUnit"><span class="comet-eRValue">'+p+"</span>"+("unit"in b?b.unit:"")+"</div>");h+="</div>";break;case "number":h+='<input type="number" id="'+c+'" name="'+a+'" class="'+g+'" value="'+p+'" '+u+"/>";"unit"in b&&(h+='<span class="comet-modalFieldUnit">'+b.unit+"</span>");break;case "numbers":if("object"!==typeof(d=b.values))return"";var k=function(a,c,d,b,g){var h="comet-modalField"+a,e="cpb-active";
"d"!==b&&(e="");a='<div class="comet-modalFieldWrap '+e+'" data-device="'+b+'">'+('<input id="'+h+'" type="number" name="'+a+'" class="'+g+'" value="'+c+'" '+u+"/>");return a=a+('<label for="'+h+'">'+d+"</label>")+"</div>"};h+='<button class="comet-button comet-edControlInline comet-editorLock" title="'+cometdata.ui.unlocked+'"><span class="cico cico-unlock"></span></button>';l&&(h=h+'<div class="comet-button comet-edControlInline comet-editorSwitchDevice"><span class="cico cico-desktop"></span><div class="comet-edSDevices">'+
('<button class="comet-edSDevice" data-device="d"><span class="cico cico-desktop"></span><span class="comet-edSDTitle">'+cometdata.ui.desktop+"</span></button>"),h+='<button class="comet-edSDevice" data-device="t"><span class="cico cico-tablet"></span><span class="comet-edSDTitle">'+cometdata.ui.tablet+"</span></button>",h+='<button class="comet-edSDevice" data-device="m"><span class="cico cico-mobile"></span><span class="comet-edSDTitle">'+cometdata.ui.mobile+"</span></button>",h+="</div></div>");
h+='<div class="comet-modalControlBunch">';for(n in d){c=a+n;var m=f.getValue(c,d[n],e);h+=k(c,m,d[n].label,"d",g);if(l)for(p=1;3>p;p++){var x=1===p?"t":"m";b=c+x;m=f.getValue(b,d[n],e);h+=k(b,m,d[n].label,x,g)}}h+="</div>";break;case "radio":if("object"!==typeof(d=b.values))return"";h+='<div class="comet-modalControlRadioWrap">';for(n in d)"title"in d[n]&&(c=a+n,e="comet-modalField"+c,c="comet-modalFieldRadioWrap",l="",p===n&&(l='checked="checked"',c+=" cpb-active"),h+='<label for="'+e+'" class="'+
c+'">',c="comet-modalFieldRadioLabel","icon"in d[n]&&(h+='<span class="comet-modalFieldRadioIcon '+d[n].icon+'"></span>',c+=" comet-tooltip"),h+='<span class="'+c+'">'+d[n].title+"</span>",h+='<input id="'+e+'" type="radio" name="'+a+'" class="'+g+'" value="'+n+'" '+l+" "+u+"/>",h+="</label>");h+="</div>";break;case "select":if("object"!==typeof(d=b.values))return"";"switch"in b&&"true"==b["switch"]&&"object"===typeof b.to&&(u+=' data-switch="'+encodeURI(JSON.stringify(b.to))+'"');h+='<select id="'+
c+'" name="'+a+'" class="'+g+'" '+u+">";for(n in d)l=n===p?'selected="selected"':"",h+='<option value="'+n+'" '+l+">"+d[n]+"</option>";h+="</select>";break;case "image":h=h+'<div class="comet-editorImage">'+f.kit.image(p);h=h+('<input type="hidden" id="'+c+'" name="'+a+'" class="'+g+'" value="'+p+'" '+u+"/>")+"</div>";break;case "icon":h+='<div class="comet-editorIcon">';h+=f.kit.icon(p);h=h+('<input type="hidden" id="'+c+'" name="'+a+'" class="'+g+'" value="'+p+'" '+u+"/>")+"</div>";break;case "gradient":(e=
cometUtils.decode.gradient(p))&&"object"===typeof e||(e=[]);e.length=e.length||0;l=[];b=2-e.length;for(n=0;n<b;n++)d=1===n?100:0,l[n]={stop:d,color:"#FFF"};e=e.concat(l);h+='<div class="comet-editGradient">';h+='<div class="comet-eGColors">';h+='<div class="comet-eGLine"></div>';for(n=0;n<e.length;n++)l=e[n],"object"===typeof l&&"color"in l&&cometUtils.eval.color(l.color)&&(d=l.stop||0,d=parseInt(l.stop),l=l.color,0>d&&(d=0),100<d&&(d=100),h+='<div class="comet-eGColor" style="left:'+d+'%;"><input type="text" class="comet-eGColorPicker comet-fieldColor" value="'+
l+'"/></div>');h+="</div>";h=h+('<input type="hidden" id="'+c+'" name="'+a+'" class="'+g+'" value="'+p+'" '+u+"/>")+"</div>";break;case "checkbox":h+='<input type="checkbox" id="'+c+'" name="'+a+'" class="'+g+'" value="true" '+u+" "+("true"==p?'checked="checked"':"")+"/>";break;default:"color"===d&&(h+='<button class="comet-button comet-modalControlClearColor">Clear</button>'),h+='<input type="text" id="'+c+'" name="'+a+'" class="'+g+'" value="'+p+'" '+u+"/>"}return h+="</div>"},getValue:function(a,
b,e){var d="";"std"in b&&(d=b.std);"object"===typeof e&&a in e&&(d=e[a]);return d},insertDataTo:function(a){var b,e,d,g;if(!("object"===typeof a&&"id"in a&&"in"in a&&"pid"in a&&"index"in a)||"number"!==typeof(b=parseInt(a.id))||isNaN(b)||"number"!==typeof(e=parseInt(a.pid))||isNaN(e)||"object"!==typeof a.data||"object"!==typeof a.to)return!1;switch(a["in"]){case "sections":var c="sections";break;case "rows":c="sections";break;case "columns":c="rows";break;case "elements":c="columns";break;case "items":c=
"elements";break;default:return!1}if("sections"!==a["in"]){if("object"!==typeof a.to[c])return!1;"object"!==typeof a.to[c][e]&&(a.to[c][e]={})}"object"!==typeof a.to[a["in"]]&&(a.to[a["in"]]={});"object"!==typeof a.to[a["in"]][a.id]&&(a.to[a["in"]][a.id]={});a.to[a["in"]][a.id]=m.extend(!0,{},a.data);var h="_"+c;if("sections"===a["in"])var l="string"===typeof a.to[h]?a.to[h]:"";else{var f="_"+a["in"];l="string"===typeof a.to[c][e][f]?a.to[c][e][f]:""}l=l.trim();if(1>l.length)l=b.toString();else switch(a.index){case "last":","!=
l.substr(-1,1)&&(l+=",");l+=b.toString();break;case "first":","!=l.substr(0,1)&&(l=","+l);l=""+b+l;break;default:if("number"===typeof(g=parseInt(a.index))||isNaN(g)||-1===(d=l.indexOf(g,0)))return!1;g=l.slice(0,d);l=l.slice(d);l=g+b+","+l}if("sections"===a["in"])return a.to[h]=l,a.to;a.to[c][e][f]=l;return a.to},addMetaData:function(a,b,e){"object"!==typeof k&&(k={});k.hasOwnProperty(e)&&"object"===typeof k[e]||(k[e]={});return k[e].hasOwnProperty(a)&&"object"===typeof k[e][a]?!1:(k[e][a]=m.extend(!0,
{},b),!0)},insertMetaData:function(a,b,e){f.addMetaData(a,b,e)||(k[e][a]=m.extend(!0,{},b));return!0},updateMetaData:function(a,b){var e=r.getElementsByClassName("comet-field"),d;a=parseInt(a);q.item&&null!==q.item&&"elements"===b&&q.state&&"items"===q.state&&(b=q.state,a=parseInt(q.item));if("number"!==typeof a||isNaN(a)||!e.length||"object"!==typeof k||"object"!==typeof k[b]||!k[b].hasOwnProperty(a))return!1;"object"!==typeof k[b][a]&&(k[b][a]={});var g=k[b][a];for(d in e){var c=e[d];if("object"===
typeof c&&"object"===typeof c.dataset&&"undefined"!==typeof c.dataset.type){var h=c.dataset.type.trim();var l=c.name;var f=c.value;"radio"===h?m(c).is(":checked")&&(g[l]=f):"checkbox"===h?m(c).is(":checked")?g[l]=f:g[l]="false":g[l]=f}}return g},generateId:function(a){"object"!==typeof k&&(k={});"object"!==typeof k[a]&&(k[a]={});var b="_max"in k[a]?parseInt(k[a]._max):0;if("number"!==typeof b||isNaN(b))b=0;b+=1;k[a]._max=b;k[a][b]={};return b},init:function(){var a=f._get(),b=m("body"),e,d;B.onbeforeunload=
function(){return"Do you really want to leave?"};if(!("post"in a&&"action"in a&&"comet"in a&&"number"===typeof(e=parseInt(a.post))&&!isNaN(e)&&"edit"===a.action&&"object"===typeof cometdata&&"object"===typeof cometUtils&&"object"===typeof cometdata.post&&"ID"in cometdata.post&&"number"===typeof(d=parseInt(cometdata.post.ID))&&!isNaN(d)&&e===d&&"meta"in cometdata.post))return alert(cometdata.messages.unreach),!1;b.addClass("comet-globalLevel");J=cometdata.post;k=J.meta;if("object"!==typeof k||"string"!==
typeof k._sections||1>k._sections.length){a=f.generateId("sections");b=f.generateId("rows");e=f.generateId("columns");d=f.generateId("elements");var g={tag:"div",content:J.post_content,_type:"text"};f.insertId(a,"sections",0,"last");f.setDefaultData(a,"sections");f.insertId(b,"rows",a,"last");f.setDefaultData(b,"rows");f.insertId(e,"columns",b,"last");f.setDefaultData(e,"columns");f.insertId(d,"elements",e,"last");f.insertMetaData(d,g,"elements")}cometUtils.init.comet(k);f.handleSize();f.events()},
setDefaultData:function(a,b){var e,d,g,c;switch(b){case "rows":var h=cometdata.row;break;case "sections":h=cometdata.section;break;case "columns":h=cometdata.column;break;case "items":if("undefined"===typeof q.id||null===q.id)return!1;var l=k.elements[q.id]._type;if(!cometdata.elements.hasOwnProperty(l))return!1;h=cometdata.elements[l].tabs.items;break;default:if(!cometdata.elements.hasOwnProperty(b))return!1;l=b;h=cometdata.elements[l];b="elements"}if("object"!==typeof h)return!1;var u={};"elements"===
b&&(u._type=l);for(e in h)if(l=h[e],"object"===typeof l&&"items"!==e&&l.hasOwnProperty("sections"))for(d in l.sections){var p=l.sections[d];if("object"===typeof p&&p.hasOwnProperty("fields"))for(g in p.fields){var n=p.fields[g];if("object"===typeof n&&n.hasOwnProperty("type")&&(!n.hasOwnProperty("protect")||"true"!==n.protect)){var t=n.type;var m=n.hasOwnProperty("std")?n.std:"";if("numbers"===t&&n.hasOwnProperty("values")&&"object"===typeof n.values)for(c in n.values){t=n.values[c];var x=g+c;"object"===
typeof t&&t.hasOwnProperty("std")?u[x]=t.std:u[x]=m}else u[g]=m}}}return f.insertMetaData(a,u,b)},insertId:function(a,b,e,d){var g;a=parseInt(a);e=parseInt(e);if("number"!==typeof a||isNaN(a)||"object"!==typeof k||"object"!==typeof k[b]||!(a in k[b])||"number"!==typeof e||isNaN(e))return!1;switch(b){case "sections":var c=b;break;case "rows":c="sections";break;case "columns":c="rows";break;case "elements":c="columns";break;case "items":c="elements";break;default:return!1}var h="_"+b;if("sections"===
b)var l="string"===typeof k[h]?k[h]:"";else{if("object"!==typeof k[c]||"object"!==typeof k[c][e])return!1;l="string"===typeof k[c][e][h]?k[c][e][h]:""}l=l.trim();if(1>l.length)l=a.toString();else switch(d){case "last":","!=l.substr(-1,1)&&(l+=",");l+=a.toString();break;case "first":","!=l.substr(0,1)&&(l=","+l),l=a.toString()+l;default:if("number"!==typeof(d=parseInt(d))||isNaN(d)||-1===(g=l.indexOf(d,0)))return!1;d=l.slice(0,g);l=l.slice(g);l=d+a.toString()+","+l}if("sections"===b)return k[h]=l,
!0;k[c][e][h]=l;return!0},replaceId:function(a,b,e,d){switch(e){case "sections":var g=e;break;case "sidebars":g="sections";break;case "rows":g="sections";break;case "columns":g="rows";break;case "elements":g="columns";break;case "items":g="elements";break;default:return!1}var c="_"+e;if("sections"===e)var h=k.hasOwnProperty(c)?k[c]:"";else{if("object"!==typeof k[g]||"object"!==typeof k[g][d])return!1;h=k[g][d].hasOwnProperty(c)?k[g][d][c]:""}h=h.trim();a=parseInt(a);b=parseInt(b);if("number"!==typeof a||
isNaN(a)||"number"!==typeof b||isNaN(b))return!1;h=h.replace(a,b);"sections"===e?k[c]=h:k[g][d][c]=h;return!0},removeId:function(a,b,e){var d,g;a=parseInt(a);e=parseInt(e);if("number"!==typeof a||isNaN(a)||"object"!==typeof k||"object"!==typeof k[b]||!(a in k[b])||"number"!==typeof e||isNaN(e))return!1;switch(b){case "sections":var c=b;break;case "rows":c="sections";break;case "columns":c="rows";break;case "elements":c="columns";break;case "items":c="elements";break;default:return!1}var h="_"+b;if("sections"===
b)var l="string"===typeof k[h]?k[h]:"";else{if("object"!==typeof k[c]||"object"!==typeof k[c][e])return!1;l="string"===typeof k[c][e][h]?k[c][e][h]:""}l=l.trim();l=cometUtils.parse.ids(l,"array");if("object"!==typeof l||!("length"in l)||1>l.length)return!1;var f=[];for(d=g=0;d<l.length;d++){var p=parseInt(l[d]);"number"!==typeof p||isNaN(p)||p===a||(f[g]=p,g++)}a=f.join(",");"sections"===b?k[h]=a:k[c][e][h]=a;return!0},getSanitizedNodes:function(a,b,e){var d=!1,g,c;if("object"!==typeof a||!a.length)return!1;
switch(e){case "sections":var h="rows";break;case "sidebars":d=!0;e="sections";h="columns";break;case "rows":h="columns";break;case "columns":h="elements";break;case "elements":h="items";break;default:h=null}if("object"!==typeof k[e]||"object"!==typeof k[e][b])return!1;h="_"+h;d&&(h="_sidebars");if(!k[e][b].hasOwnProperty(h))return!1;h=cometUtils.parse.ids(k[e][b][h],"object");if(!h)return!1;b={};for(g=c=0;g<a.length;g++)e=a[g],"undefined"!==typeof e.dataset&&"undefined"!==typeof e.dataset.id&&(d=
parseInt(e.dataset.id),"number"!==typeof d||isNaN(d)||(f.hasId(d,h)?(b[d]=e,c++,b.length=c):m(e).remove()));return b.length?b:!1},hasId:function(a,b){return"object"!==typeof b?!1:b.hasOwnProperty(a)?!0:!1},getId:function(a,b){return f.hasId(a,b)&&(a=parseInt(a),"number"===typeof a&&!isNaN(a))?a:!1},removeMetaData:function(a,b){var e=!1,d;switch(b){case "sections":var g="rows";break;case "sidebars":e=!0;b="sections";g="columns";break;case "rows":g="columns";break;case "columns":g="elements";break;
case "elements":g="items";break;default:g=null}if("object"!==typeof k[b]||"object"!==typeof k[b][a])return!1;var c="_"+g;e&&(c="_sidebars");if(null!==g&&k[b][a].hasOwnProperty(c)&&"object"===typeof k[g]){var h=cometUtils.parse.ids(k[b][a][c],"array");if(h.length)for(d=0;d<h.length;d++)c=parseInt(h[d]),"number"!==typeof c||isNaN(c)||"object"!==typeof k[g][c]||(f.removeMetaData(c,g),delete k[g][c])}!e&&"sections"===b&&k.hasOwnProperty("_sections")&&f.removeId(a,"sections",0);delete k[b][a];return!0},
cloneMetaData:function(a,b,e){var d=!1,g,c;switch(b){case "sections":var h="rows";break;case "sidebars":d=!0;b="sections";h="columns";break;case "rows":h="columns";break;case "columns":h="elements";break;case "elements":h="items";break;default:h=null}if("object"!==typeof k[b]||"object"!==typeof k[b][a])return!1;var l="_"+h;d&&(l="_sidebars");if(null!==h&&k[b][a].hasOwnProperty(l)&&"object"===typeof k[h]&&(d=cometUtils.parse.ids(k[b][a][l],"array"),d.length))for(g=c=0;g<d.length;g++)if(a=parseInt(d[g]),
"number"===typeof a&&!isNaN(a)&&"object"===typeof k[h][a]){var u=f.generateId(h);f.insertMetaData(u,k[h][a],h);d[g]=u;k[b][e][l]=d.join(",");f.cloneMetaData(a,h,u);c++}},initCloneMetaData:function(a,b,e){var d=f.generateId(b);if(f.insertMetaData(d,k[b][a],b))return f.insertId(d,b,e,"last"),f.cloneMetaData(a,b,d),d},moveNodeFromTo:function(a){a={from:{id:a.from.id||null,node:a.from.node||null,type:a.from.type||null},node:{id:a.node.id||null,node:a.node.node||null,type:a.node.type||null},to:{id:a.to.id||
null,node:a.to.node||null,type:a.to.type||null}};f.removeId(a.node.id,a.node.type,a.from.id);f.insertId(a.node.id,a.node.type,a.to.id,"last");var b=a.node.node.outerHTML;m(a.node.node).remove();m(a.to.node).append(b)},getOffset:function(a,b,e,d){if("object"!==typeof b)return!1;if("number"!==typeof d||isNaN(d)||0>d)d=0;var g=f.getMax(b);if(!g)return!1;e[g]=b[g];delete b[g];d+=1;e.length=d;--a;if(0<a)return e=f.getOffset(a,b,e,d);a=f.getMax(b);if(!a)return!1;e._to={id:a,node:b[a]};return e},getMax:function(a){if("object"!==
typeof a)return!1;var b=0;for(e in a){var e=parseInt(e);"number"!==typeof e||isNaN(e)||b<=e&&(b=e)}return b},kit:{image:function(a){var b=cometdata.ui.browse,e=cometdata.ui.remove;return"string"!==typeof a||0>=a.length||!cometUtils.eval.image(a)?'<button class="comet-button comet-buttonPrimary comet-edImageUpload">'+b+"</button>":'<div class="comet-edImageUpload comet-edImage" title="'+b+'"><img src="'+a+'"/><button class="comet-button comet-buttonPrimary comet-edImageRemove" title="'+e+'"><span class="cico cico-x"></span></button></div>'},
icon:function(a){var b=cometdata.ui.browse,e=cometdata.ui.remove;return cometUtils.eval.empty(a)?'<button class="comet-button comet-buttonPrimary comet-edIconUpload">'+b+"</button>":'<div class="comet-edIconUpload comet-edIcon" title="'+b+'">'+cometUtils.generate.icon(a)+'</span><button class="comet-button comet-buttonPrimary comet-edIconRemove" title="'+e+'"><span class="cico cico-x"></span></button></div>'},item:function(a,b){var e='<li data-id="'+a+'" class="comet-edModalItem">'+("<span><span>#"+
a+"</span>");cometUtils.eval.empty(b)||(e+=b);e=e+"</span>"+('<button class="comet-edModalItemEdit comet-button comet-buttonPrimary" title="'+cometdata.ui.edit+'"><span class="cico cico-edit"></span></button>');e+='<button class="comet-edModalItemDelete comet-button comet-buttonPrimary" title="'+cometdata.ui["delete"]+'"><span class="cico cico-trash"></span></button>';return e+"</li>"}},load:{set:function(a){var b=cometdata.svgSets,e=r.getElementById("comet-mipResult");if(!(a in b&&"set"in b[a]&&
e)||null==e||"object"!==typeof e)return!1;var d=r.createElement("div");m(d).load(b[a].set,function(b,c,h){b=d.childNodes;var g,f;if(!b||"object"!==typeof b||1>b.length)return!1;h="";for(c=0;c<b.length;c++)if((g=b[c])&&"object"===typeof g&&"svg"===g.nodeName.toLowerCase()&&g.childNodes&&"object"===typeof g.childNodes&&!(0>g.childNodes.length))for(g=g.childNodes,f=0;f<g.length;f++){var p=g[f];if("object"===typeof p&&"symbol"===p.nodeName.toLowerCase()&&"id"in p){var n=p.getAttribute("viewBox");var k=
m(p).children("title");var y=k.text();k.remove();h+='<div class="comet-mipCollectionScope" data-id="'+a+":"+p.id.trim()+'">';h+='<div class="comet-mipSvgIcon">';h+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="'+n+'">'+p.innerHTML+"</svg>";h+="</div>";cometUtils.eval.empty(y)||(h+='<span class="comet-mipSvgIconLabel">'+y+"</span>");h+="</div>"}}e.innerHTML=h})},temp:function(a){var b=r.getElementById("comet-tempResult");if(!b||null==b||"object"!==typeof b)return!1;b.innerHTML='<span class="comet-waitWhileIcon cico cico-spin"></span>';
a=cometUtils.load({"do":"templates",data:a});if(!a)return!1;a.done(function(a){b.innerHTML=a})}},toggle:{tabs:function(a){var b,e;var d=function(a){var c=a.parentNode,d=c.parentNode,b=m(d).children(".comet-modalTab");d=d.parentNode.parentNode.children;var g=!1,h,e,f;if(d.length&&!(0>=d.length)&&a.attributes.href&&a.attributes.href.value&&"string"===typeof a.attributes.href.value){a=a.attributes.href.value;for(e=0;e<d.length;e++)if((h=d[e])&&"undefined"!==typeof h&&m(h).hasClass("comet-modalContent")&&
h.children&&!(0>=h.children.length))for(h=h.children,f=0;f<h.length;f++){var l=h[f];var k=m(l);l&&k.hasClass("comet-modalTab")&&(k.removeClass("cpb-active").hide(),l.id===a.substr(1)&&(k.addClass("cpb-active").show(),g=!0))}g&&(b.removeClass("cpb-active"),m(c).addClass("cpb-active"))}};if("init"===a){if((a=r.getElementsByClassName("comet-modalTabs"))&&!(0>=a.length))for(b=0;b<a.length;b++){var g=a[b];if("undefined"!==typeof g&&(g=g.children,!(0>=g.length)))for(e=0;e<g.length;e++){var c=g[e];var h=
m(c);if("undefined"!==typeof c&&h.hasClass("comet-modalTab")&&!(0!==e||0>=c.children.length))for(h=0;h<c.children.length;h++){var f=c.children[h];m(f).hasClass("comet-modalTabRef")&&d(f)}}}}else d(a)},accordion:function(a){var b=0,e;if("object"===typeof a&&null!==a.parentNode&&null!==a.parentNode.parentNode){var d=m(a.parentNode);d.hasClass("cpb-active")||(b=1);var g=a.parentNode.parentNode;g=g.getElementsByClassName("comet-editorModalSectionHeader")}else g=r.getElementsByClassName("comet-editorModalSectionHeader");
if("object"===typeof g&&0<g.length)for(e=0;e<g.length;e++){var c=g[e];"object"===typeof c&&null!==c.parentNode&&m(c.parentNode).removeClass("cpb-active").children(".comet-editorModalSectionBody").slideUp()}if("init"!==a&&1===b&&"object"===typeof d)return d.addClass("cpb-active").children(".comet-editorModalSectionBody").slideDown(),!0},editor:function(){var a=r.getElementsByClassName("comet-fieldEditor"),b=!1;var e=r.getElementById("comet-editorToolbar");var d=r.getElementsByClassName("comet-editorContentBody");
var g=("0"in arguments||arguments.hasOwnProperty("0"))&&"close"===arguments[0].toLowerCase()?"close":"open";e&&m(e).remove();d&&0<d.length&&m(d).removeAttr("contenteditable");cometUtils._editor=!1;if("close"===g||!a||1>a.length)return I.css({top:"0",height:"100%"}),f.handleSize(),!0;cometUtils._editor=q.id;d=m(q.node);"item"in q&&"number"===typeof q.item&&(cometUtils._editor=q.item,d=d.find(".cpb-elementItem"+q.item));for(e=0;e<a.length;e++)g=a[e],"object"===typeof g&&g.hasAttribute("name")&&(b=g.name.trim(),
d.find(".comet-editorContentBody[data-match="+b+"]").attr("contenteditable","true"),b=!0);if(!b)return cometUtils._editor=!1;e=[];e[e.length]={command:"bold",icon:"cico cico-bold",title:cometdata.ui.bold};e[e.length]={command:"italic",icon:"cico cico-italic",title:cometdata.ui.italic};e[e.length]={command:"underline",icon:"cico cico-underline",title:cometdata.ui.underline};e[e.length]={command:"strikeThrough",icon:"cico cico-strikethrough",title:cometdata.ui.st};e[e.length]={command:"link",icon:"cico cico-link",
title:cometdata.ui.ilink};a='<div id="comet-editorToolbar">';for(b=0;b<e.length;b++)d=e[b],a+='<button class="comet-button comet-editorToolbarTool" data-command="'+d.command+'">',g="comet-editorTbTitle",d.hasOwnProperty("icon")&&(a+='<span class="comet-editorTbIcon '+d.icon+'"></span>',g+=" comet-tooltip"),d.hasOwnProperty("title")&&(a+='<span class="'+g+'">'+d.title+"</span>"),a+="</button>";I.before(a+"</div>");f.handleSize()},menuComponent:function(a){var b=f.get.activeMenuButton(),e=r.getElementById("comet-menuComponent");
if(!f.node(b).isNode()||!f.node(e).isNode())return!1;switch(a){case "close":f.node(b).removeClass("cpb-active");e.parentNode.removeChild(e);break;case "resize":b=b.getBoundingClientRect();a=b.top+b.height;b=b.left;e.style.top=a+"px";e.style.left=b+"px";break;default:return!1}}},initModalParts:function(){f.toggle.editor();f.handleSize();f.toggle.tabs("init");f.toggle.accordion("init");f.initSpectrum();cometUtils.init.icons()},handleSize:function(){var a=r.getElementById("comet-editorSidebar"),b=r.getElementById("comet-modal"),
e=r.getElementById("comet-editorToolbar"),d="rtl"in cometdata&&"true"==cometdata.rtl?"right":"left",g=0,c=0;var h={};a&&(g=m(a).outerWidth(!0));b&&(c=m(b).css(d,g+"px").outerWidth(!0));a=P-g-c;C.style[d]=g+c+"px";e&&(e=m(e),e.css(h),h=e.outerHeight(!0),C.style.top=h+"px",C.style.height="calc(100% - "+h+"px)");C.className="cpb-desktopMode";C.style.maxWidth=a+"px";f.closeOptions()},initSpectrum:function(){m(".comet-fieldColor").spectrum({preferredFormat:"hex",showButtons:!1,showAlpha:!0,showInput:!0,
show:function(){var a=this.parentNode;if(m(this).hasClass("comet-eGColorPicker")){var b=a.offsetLeft;b=0>=b?0:"-"+b+"px";m(a).children(".sp-container").css("left",b)}},move:function(a){var b=m(this);b.val(a.toString());b.hasClass("comet-eGColorPicker")&&f.updateGradient(this.parentNode);f.updateComponent(this)}})},updateGradient:function(a){var b=a.parentNode,e=m(b).children(".comet-eGColor");a=[];var d=0,g;if(e.length){for(g=0;g<e.length;g++){var c=e[g];var h=m(c).children(".comet-fieldColor").val();
if(cometUtils.eval.color(h)){c=parseInt(c.style.left);if("number"!==typeof c||isNaN(c))c=0;0>c&&(c=0);100<c&&(c=100);a[d]={stop:c,color:h};d++}}b=b.parentNode;a=cometUtils.encode.gradient(a);m(b).children(".comet-field").val(a)}},range:function(){var a=null,b=null,e=null,d=0,g=1,c=1,h;var l={move:{on:"mousemove",trigger:"html","do":function(h,l){var n;if(null!==a&&null!==e&&null!==b&&(n=a.parentNode.parentNode.children)&&!(null==n|"object"!==typeof n)&&"length"in n&&!(1>n.length)){var p=parseInt(h.pageX-
e);if("number"!==typeof p||isNaN(p))p=0;p>=b&&(p=b);0>=p&&(p=0);var k=Number((p/b*100).toFixed(2));a.style.left=k+"%";p=c*Math.round(p/(b||1)*(g-d)/c)+d;p=Number(p.toFixed(2));for(k=0;k<n.length;k++){var u=n[k];var z=m(u);if(z.hasClass("comet-field")){var v=u;z.val(p)}else z.hasClass("comet-eRValueUnit")&&z.children(".comet-eRValue").html(p)}v&&"object"===typeof v&&f.updateComponent(v)}}},start:{on:"mousedown",trigger:".comet-eRDragger","do":function(h,f){h.preventDefault();a=f;var l=a.parentNode;
var p=l.getBoundingClientRect();b=m(l).outerWidth();e=p.left;l=m(l.parentNode).children(".comet-field");d=parseFloat(l.attr("min"))||0;g=parseFloat(l.attr("max"))||360;c=parseFloat(l.attr("step"))||1}},stop:{on:"mouseup",trigger:"html","do":function(h,f){h.preventDefault();e=b=a=null;d=0;c=g=1}},ui:{on:"click",trigger:".comet-eRDecrease, .comet-eRIncrease","do":function(a,d){a.preventDefault();var b=m(d),h=d.parentNode.children,g,e,l,p;if(h&&null!=h&&"object"===typeof h&&"length"in h&&!(1>h.length)){for(p=
0;p<h.length;p++){var k=h[p];var u=m(k);u.hasClass("comet-field")?l=k:u.hasClass("comet-eRValueUnit")?g=u.children(".comet-eRValue"):u.hasClass("comet-eRange")&&(e=k)}if("object"===typeof l&&"object"===typeof g&&"object"===typeof e){h=parseFloat(l.value);k=parseFloat(l.getAttribute("min"))||0;u=parseFloat(l.getAttribute("max"))||360;p=parseFloat(l.getAttribute("step"))||1;if("number"!==typeof h||isNaN(h))h=k;b.hasClass("comet-eRDecrease")?h-=p:b.hasClass("comet-eRIncrease")&&(h+=p);h<k?h=k:h>u&&(h=
u);b=Number(((h-k)/((u-k)/c*c)*100).toFixed(2));h=Number(h.toFixed(2));l.value=h;g.html(h);m(e).children(".comet-eRDragger").css({left:b+"%"});f.updateComponent(l)}}}}};for(h in l)(function(){var a=l[h];H.on(a.on,a.trigger,function(c){a["do"](c,this)})})(h)},gradient:function(){var a=null,b=null,e=null,d=null,g=!1,c,h;var l={move:{on:"mousemove",trigger:"html","do":function(c,d){if(null!==a&&null!==e&&null!==b){var h=parseInt(c.pageX-e);if("number"!==typeof h||isNaN(h))h=0;h>=b&&(h=b);0>=h&&(h=0);
h=parseInt(h/b*100);a.style.left=h+"%";f.updateGradient(a);f.updateComponent(a)}}},start:{on:"mousedown",trigger:".comet-eGColor","do":function(c,l){var f,k,p,u;h=setInterval(function(){m(".comet-fieldColor").spectrum("hide");a=l;f=l.parentNode;k=f.getBoundingClientRect();b=m(f).outerWidth();e=k.left;p=f.parentNode;u=m(p);d=u.children(".comet-eGDelete");g=!0;d.length&&!d.is(":visible")?d.show():d.length||(u.append('<button class="comet-eGDelete comet-button" title="'+cometdata.ui["delete"]+'"><span class="cico cico-trash"></span> '+
cometdata.ui["delete"]+"</button>"),d=u.children(".comet-eGDelete"))},500)}},stop:{on:"mouseup",trigger:"html","do":function(c,l){c.preventDefault();var f=m(c.target);clearInterval(h);g&&(null!==a&&f.hasClass("comet-eGDelete")&&(f=m(a.parentNode).children(".comet-eGColor"),2<f.length&&a.remove()),null!==d&&(d.remove(),d=null),e=b=a=null,g=!1)}},add:{on:"click",trigger:".comet-eGLine","do":function(a,c){a.preventDefault();var d=m(c.parentNode);if(d){var h=d.children(".comet-eGColor");if(!h||5>h.length)d.append('<div class="comet-eGColor" style="left:50%"><input class="comet-eGColorPicker comet-fieldColor" value="#FFF" type="text"/></div>'),
f.initSpectrum()}}}};for(c in l)(function(){var a=l[c];H.on(a.on,a.trigger,function(c){a["do"](c,this)})})(c)},updateComponent:function(a){var b,e,d,g,c,h;if("object"===typeof q&&"id"in q&&"node"in q&&"number"===typeof(b=parseInt(q.id))&&!isNaN(b)&&"string"===typeof(e=q.type)&&-1!==["sections","rows","columns","elements","items"].indexOf(e)&&"object"===typeof k[e]){if("object"===typeof a.dataset&&"string"===typeof(g=a.dataset.type)&&"numbers"===g){var l=a.parentNode;"number"===typeof(h=parseFloat(a.value))&&
!isNaN(h)&&m(l).hasClass("comet-modalFieldLocked")&&(l=l.parentNode,m(l).children(".comet-modalFieldWrap.cpb-active.comet-modalFieldLocked").children(".comet-field").val(h))}if("object"===typeof a.dataset&&"string"===typeof(g=a.dataset.type)&&"select"===g&&"switch"in a.dataset){g=JSON.parse(decodeURI(a.dataset["switch"]));var u=r.getElementsByClassName("comet-field");for(c=0;c<u.length;c++)if(l=u[c],"object"===typeof l&&"name"in l)for(n in g){var p=g[n];if("object"===typeof p)for(y in p)a.value==
n&&l.name==p[y]?m(l).closest(".comet-modalControlWrap").removeClass("comet-modalControlHide"):l.name==p[y]&&m(l).closest(".comet-modalControlWrap").addClass("comet-modalControlHide")}}if("columns"===e&&"wsize"===a.name){l=q.node.parentNode;h="number"!==typeof(h=parseFloat(a.value))||isNaN(h)?10:h.toFixed(2);var n=m(l).children(".cpb-column");if(n.length)if(1===n.length)a.value=100;else{n=m(l).width();var t=q.node.offsetWidth/n*100;g=m(q.node);l=g.next(".cpb-column[data-id]");var y=function(c){c=parseInt(c.dataset.id);
var d=0;var b=t-h;0>b&&(b=0-b);h<t&&(d=x+b);h>t&&(d=x-b);h==t&&(d=x);10>d&&(b=10-d,0>b&&(b=0-b),d=10,h-=b);10>h&&(b=10-h,0>b&&(b=0-b),d-=b,h=10);d=parseFloat(d).toFixed(2);h=parseFloat(h).toFixed(2);"object"!==typeof k[e][c]&&(k[e][c]={});k[e][c].wsize=d;m(a).val(h);d=cometUtils.layout(k,!0).column(c);"css"in d&&f.insert.css(c,"columns",d)};if(l&&l.length&&0<l.length&&"object"===typeof l[0]){var x=l[0].offsetWidth/n*100;y(l[0])}else(g=g.prev(".cpb-column[data-id]"))&&g.length&&0<g.length&&"object"===
typeof g[0]&&(x=g[0].offsetWidth/n*100,y(g[0]))}}if(d=f.updateMetaData(b,e)){y=q.node;n=function(a){if(a&&"object"===typeof a){var c=f.get.node.child(a,"cpb-backgroundComponents");c||(c=r.createElement("div"),c.className="cpb-backgroundComponents",a.appendChild(c));c.innerHTML="";"vid"in d&&"true"==d.vid&&"vurl"in d&&cometUtils.eval.video(d.vurl)&&(a=r.createElement("video"),a.src=d.vurl,a.className="cpb-backgroundVideo",a.setAttribute("loop",""),a.setAttribute("autoplay",""),a.setAttribute("muted",
""),a.setAttribute("preload","auto"),c.appendChild(a));"ov"in d&&"true"==d.ov&&"ovc"in d&&cometUtils.eval.color(d.ovc)&&(a=r.createElement("div"),a.className="cpb-backgroundOverlay",c.appendChild(a))}};switch(e){case "sections":y=f.get.node.child(y,"cpb-sectionContent");n(y);n=cometUtils.layout(k,!0).section(b);break;case "rows":y=f.get.node.child(y,"cpb-rowContent");n(y);n=cometUtils.layout(k,!0).row(b);break;case "columns":y=f.get.node.child(y,"cpb-columnContent");n(y);n=cometUtils.layout(k,!0).column(b);
break;case "elements":n=cometUtils.layout(k).iElement(b);break;default:return}"object"===typeof n&&("css"in n&&f.insert.css(b,e,n),"html"in n&&"elements"===e&&(q.node.innerHTML=n.html,cometUtils.init.icons(),cometUtils.init.images(),cometNopriv.init()))}}},redefineColumns:function(a){var b=f.get.node.children(a,"cpb-column"),e,d;if(b&&"object"===typeof b&&"length"in b){var g=b.length;a.dataset.ncol=g;if(!(1>g)){var c=Number(100/g).toFixed(2);for(a=0;a<g;a++)(e=b[a])&&"object"===typeof e.dataset&&
"id"in e.dataset&&"number"===typeof(d=parseInt(e.dataset.id))&&!isNaN(d)&&("object"!==typeof k.columns[d]&&(k.columns[d]={}),k.columns[d].wsize=c,e=cometUtils.layout(k,!0).column(d),"object"===typeof e&&"css"in e&&f.insert.css(d,"columns",e))}}},closeOptions:function(){var a=r.getElementsByClassName("comet-menuComponentButton"),b=r.getElementById("comet-menuComponent"),e;if(a&&"object"===typeof a&&0<a.length)for(e=0;e<a.length;e++){var d=a[e];f.node(d).removeClass("cpb-active")}b&&"object"===typeof b&&
b.parentNode&&"object"===typeof b.parentNode&&b.parentNode.removeChild(b)},events:function(){var a=[],b;a[a.length]={on:"click",trigger:".comet-tempItemInsert","do":function(a,b){a.preventDefault();var c;"object"!==typeof b.dataset||"undefined"===typeof b.dataset.id||"number"!==typeof(c=parseInt(b.dataset.id))||isNaN(c)||cometUtils.load({id:c,"do":"meta"}).done(function(a){var c=!1,d,h,b,g,e,r;if("0"==a||"object"!==typeof(d=cometUtils.parse.json(a))||!("_sections"in d)||cometUtils.eval.empty(d._sections)||
"object"!==typeof d.sections)return!1;var q=cometUtils.parse.ids(d._sections,"array");if("object"!==typeof q||1>q.length)return!1;for(h=a=0;h<q.length;h++){var v=q[h];if("object"===typeof d.sections[v]){var A=f.generateId("sections");var w=m.extend(!0,{},d.sections[v]);w._rows="";w=f.insertDataTo({id:A,"in":"sections",pid:0,index:"last",data:w,to:k});"object"===typeof w&&(k=w,0===a&&(c=A,a++));if("_rows"in d.sections[v]&&"string"===typeof d.sections[v]._rows&&(v=cometUtils.parse.ids(d.sections[v]._rows,
"array"),!("object"!==typeof v||1>v.length)))for(b=0;b<v.length;b++){var D=v[b];if("object"===typeof d.rows[D]){var K=f.generateId("rows");w=m.extend(!0,{},d.rows[D]);w._columns="";w=f.insertDataTo({id:K,"in":"rows",pid:A,index:"last",data:w,to:k});"object"===typeof w&&(k=w);if("_columns"in d.rows[D]&&"string"===typeof d.rows[D]._columns&&(D=cometUtils.parse.ids(d.rows[D]._columns,"array"),!("object"!==typeof D||1>D.length)))for(g=0;g<D.length;g++){var E=D[g];if("object"===typeof d.columns[E]){var L=
f.generateId("columns");w=m.extend(!0,{},d.columns[E]);w._elements="";w=f.insertDataTo({id:L,"in":"columns",pid:K,index:"last",data:w,to:k});"object"===typeof w&&(k=w);if("_elements"in d.columns[E]&&"string"===typeof d.columns[E]._elements&&(E=cometUtils.parse.ids(d.columns[E]._elements,"array"),!("object"!==typeof E||1>E.length)))for(e=0;e<E.length;e++){var F=E[e];if("object"===typeof d.elements[F]){var B=f.generateId("elements");w=m.extend(!0,{},d.elements[F]);w._items="";w=f.insertDataTo({id:B,
"in":"elements",pid:L,index:"last",data:w,to:k});"object"===typeof w&&(k=w);if("_items"in d.elements[F]&&"string"===typeof d.elements[F]._items&&(F=cometUtils.parse.ids(d.elements[F]._items,"array"),!("object"!==typeof F||1>F.length)))for(r=0;r<F.length;r++)if(w=F[r],"object"===typeof d.items[w]){var C=f.generateId("items");w=m.extend(!0,{},d.items[w]);w=f.insertDataTo({id:C,"in":"items",pid:B,index:"last",data:w,to:k});"object"===typeof w&&(k=w)}}}}}}}}}c=cometUtils.layout(k).init(c);"object"===
typeof c&&("html"in c&&I.append(c.html),"css"in c&&m("head").append(c.css),cometUtils.init.images(),cometUtils.init.icons(),cometNopriv.init())})}};a[a.length]={on:"click",trigger:".comet-tempItemPreview","do":function(a,b){a.preventDefault();var c;"object"!==typeof b.dataset||"undefined"===typeof b.dataset.id||"number"!==typeof(c=parseInt(b.dataset.id))||isNaN(c)||f.dialog.init({id:"comet-modalPreviewTemplate",header:"<h4>"+cometdata.titles.ptemp+" ("+c+")</h4>",content:'<iframe src="'+cometUtils.esc.url(cometdata.admin_url+
"?comet=mytemplates&action=preview&id="+c)+'"></iframe>'})}};a[a.length]={on:"mouseenter mouseleave",trigger:".cpb-column,.cpb-element","do":function(a,b){a.stopPropagation();var c=r.getElementsByClassName("comet-menuComponentButton"),d,g;if(c&&"object"===typeof c&&0<c.length)for(g=0;g<c.length;g++)f.node(c[g]).hasClass("cpb-active")||c[g].parentNode.removeChild(c[g]);"mouseleave"!==a.type&&(c=m(b),!(d=c.hasClass("cpb-column"))&&!c.hasClass("cpb-element")||d&&0<c.find(".cpb-element").length||0<c.find(".cpb-active.comet-menuComponentButton").length||
(d=r.createElement("button"),d.className="comet-menuComponentButton comet-button",d.innerHTML='<span class="cico cico-more"></span>',b.appendChild(d)))}};a[a.length]={on:"click",trigger:".comet-editorCockpitToggle","do":function(a,b){a.preventDefault();var c=r.getElementById("comet-editorCockpit");if(!c||null==c||"object"!==typeof c)return!1;m(c).toggleClass("cpb-active")}};a[a.length]={on:"click",trigger:"#comet-clearNotifications, .comet-closeNote","do":function(a,b){a.preventDefault();var c=r.getElementById("comet-editorNotifications");
if(!c||null==c||"object"!==typeof c)return!1;if("comet-clearNotifications"===b.id)return c.innerHTML="",!0;c.removeChild(b.parentNode)}};a[a.length]={on:"click",trigger:".comet-edSDevice","do":function(a,b){a.preventDefault();a.stopPropagation();var c=b.parentNode.parentNode,d=c.parentNode,g=d.children,e=b.dataset.device,k;switch(e){case "d":var n="cico-desktop";f.handleSize();break;case "t":n="cico-tablet";C.className="cpb-tabletMode";C.style.maxWidth="800px";break;case "m":n="cico-mobile";C.className=
"cpb-mobileMode";C.style.maxWidth="400px";break;default:return}c=m(c);c.removeClass("cpb-active");c.children(".cico").replaceWith('<span class="cico '+n+'"></span>');for(n=0;n<g.length;n++)if((c=g[n])&&"undefined"!==typeof c&&m(c).hasClass("comet-modalControlBunch")&&(k=c.children)&&!(0>=k.length)){var t=!1;0<m(d).children(".comet-editorLock.cpb-active").length&&(t=!0);for(c=0;c<k.length;c++){var y=k[c];var r=m(y);if(y&&"undefined"!==typeof y&&r.hasClass("comet-modalFieldWrap")&&"object"===typeof y.dataset&&
y.dataset.hasOwnProperty("device")){var q="cpb-active comet-modalFieldLocked";r.removeClass(q).hide();y.dataset.device===e&&(q="cpb-active",t&&(q+=" comet-modalFieldLocked"),r.addClass(q).show())}}}}};a[a.length]={on:"click",trigger:".comet-modalControlClearColor","do":function(a,b){a.preventDefault();var c=m(b.parentNode).children(".comet-field").val("");f.updateComponent(c[0])}};r.addEventListener("scroll",function(a){m(a.target).hasClass("comet-modalContent")&&m(".comet-fieldColor").spectrum("hide")},
!0);a[a.length]={on:"input propertychange click",trigger:".comet-editorContentBody","do":function(a,b){if("click"!==a.type){if("object"===typeof b.dataset&&b.dataset.hasOwnProperty("match")&&"undefined"!==typeof b.dataset.match){var c=b.dataset.match;var d=b.innerHTML,g=r.getElementsByClassName("comet-fieldEditor"),e;if(g&&!(1>g.length)){for(e=0;e<g.length;e++){var k=g[e];"object"===typeof k&&k.name==c&&(k.value=d)}f.updateMetaData(q.id,q.type)}}}else{"undefined"===typeof c&&(c=B.getSelection&&B.getSelection().modify?
"xul":r.selection?"msie":"unknown");if("unknown"===c)return!1;switch(c){case "xul":c=B.getSelection();G.range=c.getRangeAt(0);G.clicked=!0;break;case "msie":G=r.selection;break;default:G=null}c=a.target;var n=function(a){var c=a.parentNode,d;if(!m(a).hasClass("comet-editorContentBody")){switch(a.nodeName.toLowerCase()){case "strong":case "b":var b="bold";break;case "i":case "em":b="italic";break;case "u":case "ins":b="underline";break;case "del":case "strike":b="strikeThrough";break;case "a":b="link";
break;default:return}if(t&&0<t.length)for(d=0;d<t.length;d++){var h=t[d];if("object"===typeof h&&"object"===typeof h.dataset&&h.dataset.command===b){var g=m(h);g.addClass("cpb-active");"a"===h.dataset.command&&g.attr("data-url",a.href)}}c&&n(c)}};var t=m(".comet-editorToolbarTool");t.removeClass("cpb-active");n(c)}}};a[a.length]={on:"click",trigger:".comet-editorToolbarTool","do":function(a,b){var c=m(b);if(!1==="dataset"in b||!1==="command"in b.dataset)return!1;var d=b.dataset.command;var g=null;
switch(d){case "bold":case "italic":case "underline":case "justifyLeft":case "justifyRight":case "strikeThrough":case "justifyCenter":break;case "link":d=c.attr("data-url");d="string"===typeof d&&0<d.length?d:"http://";d='<div class="comet-editorToolbarToolInline"><button class="comet-button comet-editorToolbarTool" data-command="unlink"><span class="cico cico-unlink"></span></button>'+('<input type="text" class="comet-rendField" value="'+d+'"/>')+'<button class="comet-button comet-editorToolbarTool" data-command="createLink"><span class="cico cico-break"></span></button></div>';
c.before(d).remove();return;case "createLink":case "unlink":g=m(b.parentNode).children("input").val();var e="comet-button comet-editorToolbarTool",f="";"createLink"===d&&(e+=" cpb-active",f='data-url="'+g+'"');m(b.parentNode).before('<button class="'+e+'" data-command="link" '+f+'><span class="cico cico-link"></span></button>').remove();break;default:return!1}c.hasClass("cpb-active")?c.removeClass("cpb-active"):c.addClass("cpb-active");c=g;var k;"undefined"===typeof k&&(k=B.getSelection&&B.getSelection().modify?
"xul":r.selection?"msie":"unknown");if("unknown"!==k&&null!==G){if("xul"===k){var t=B.getSelection();G.clicked&&(t.removeAllRanges(),t.addRange(G.range));"Caret"===t.type&&(t.modify("move","backward","word"),t.modify("extend","forward","word"));t.getRangeAt(0);r.execCommand(d,!1,c);G.clicked=!1}if("msie"===k){c=t.createRange();for(c.text||c.expand("word");/\s$/.test(c.text);)c.moveEnd("character",-1);1>c.text.length||(d=c.text,t=r.createElement(void 0),t.appendChild(r.createTextNode(d)),c.insertNode(t))}}}};
a[a.length]={on:"click",trigger:".comet-edControlInline","do":function(a,b){a.preventDefault();a.stopPropagation();var c=m(b),d=c.hasClass("comet-editorLock")?!0:!1,g;if(c.hasClass("cpb-active")){c.removeClass("cpb-active");var e="cico-unlock";var f=!1}else c.addClass("cpb-active"),e="cico-lock",f=!0;if(d)for(c.children(".cico").replaceWith('<span class="cico '+e+'"></span>'),d=b.parentNode.children,c=0;c<d.length;c++)if((e=d[c])&&"undefined"!==typeof e&&m(e).hasClass("comet-modalControlBunch")&&
(g=e.children)&&!(0>=g.length))for(e=0;e<g.length;e++){var k=g[e];var t=m(k);k&&"undefined"!==typeof k&&t.hasClass("comet-modalFieldWrap")&&t.hasClass("cpb-active")&&(t.removeClass("comet-modalFieldLocked"),f&&t.addClass("comet-modalFieldLocked"))}}};a[a.length]={on:"click",trigger:".comet-edModalItemAdd","do":function(a,b){a.preventDefault();var c=m(b.parentNode.parentNode).children(".comet-edModalItems");if(c&&!(0>=c.length)&&null!==q.id&&null!==q.type){var d=f.generateId("items");f.setDefaultData(d,
"items")&&(f.insertId(d,"items",q.id,"last"),d=f.kit.item(d,""),c.append(d))}}};a[a.length]={on:"click",trigger:"#comet-editorSaveTemplate","do":function(a,b){a.preventDefault();a.stopPropagation();var c="<h4>"+cometdata.titles.santemp+"</h4>";var d='<div id="comet-saveTempWin">'+("<p>"+cometdata.messages.santemp+' <a href="'+cometUtils.esc.url("https://blacklead.fr/support/docs/comet/my-templates/")+'" target="_blank">'+cometdata.messages.rmtemp+"</a>.</p>");d=d+'<div id="comet-saveTempForm">'+('<input id="comet-saveTempInput" class="comet-rendField" value="" placeholder="'+
cometdata.ui.tempname+'"/>');d+='<button class="comet-saveTempButton comet-button comet-buttonPrimary" title="'+cometdata.ui.save+'"><span class="cico cico-export"></span></button>';f.dialog.init({id:"comet-modalSaveTemplate",header:c,content:d+"</div></div>",done:{target:".comet-saveTempButton","do":function(a,c){var d=r.getElementById("comet-saveTempInput"),b;var h="";d&&null!==d&&"object"===typeof d||(h=cometdata.messages.notSaved+"<br>");if(!(k&&"_sections"in k)||1>k._sections.length)h=cometdata.messages.empty+
"<br>";if("string"!==typeof d.value||cometUtils.eval.empty(b=d.value.trim()))h+=cometdata.messages.noTitle;if(0<h.length)return d=r.createElement("div"),d.setAttribute("class","comet-saveTempErr"),d.innerHTML=h,c.parentNode.parentNode.appendChild(d),1;h={title:b,meta:k,content:f.get.content(),post_type:"comet_mytemplates"};cometUtils.load({"do":"save",data:JSON.stringify(h)})}}})}};a[a.length]={on:"click",trigger:"#comet-editorSaveButton","do":function(a,b){a.preventDefault();var c=parseInt(J.ID),
d=m(b);if("number"!==typeof c||isNaN(c)||d.hasClass("cpb-disabled"))return!1;d.addClass("cpb-disabled").children(".cico").toggleClass("comet-waitWhileIcon");c={id:c,meta:k,content:f.get.content()};c=cometUtils.load({"do":"save",data:JSON.stringify(c)});if(!c)return!1;c.always(function(a,c,b){a=parseInt(a);switch(a){case 0:case 400:c=cometdata.messages.error.savePost;break;default:c=cometdata.messages.success.savePost}f.notification(c,a);d.removeClass("cpb-disabled").children(".cico").removeClass("comet-waitWhileIcon")})}};
a[a.length]={on:"click",trigger:"#comet-editorTemplates","do":function(a,b){a.preventDefault();a.stopPropagation();f.dialog.init({id:"comet-modalTemplatesLibrary",header:'<div id="comet-tempSearch"><select id="comet-tempFieldSwitch" class="comet-tempField comet-rendField">'+('<option value="cus">'+cometdata.titles.mytemp+"</option>")+'</select><input id="comet-tempFieldSearch" class="comet-tempField comet-rendField" value="" placeholder="Search a template..." /></div>',content:'<div id="comet-tempResult"></div>',
done:{target:".comet-tempItemInsert","do":function(a,d){if("object"!==typeof d.dataset||cometUtils.eval.empty(d.dataset.id))return!1}}});f.load.temp("cus")}};a[a.length]={on:"change",trigger:"#comet-tempFieldSwitch","do":function(a,b){f.load.temp(b.value)}};a[a.length]={on:"input propertychange",trigger:"#comet-tempFieldSearch","do":function(a,b){var c=r.getElementById("comet-tempResult").getElementsByClassName("comet-tempCollectionScope"),d=b.value,g;if(!c||"object"!==typeof c||1>c.length)return!1;
d=cometUtils.eval.empty(d)?"":d.trim();var e=new RegExp(d,"i");for(g=0;g<c.length;g++){var f=c[g];"object"===typeof f.dataset&&"undefined"!==typeof f.dataset.title&&(""!==d&&-1===f.dataset.title.search(e)?f.style.display="none":f.style.display="inline-block")}}};a[a.length]={on:"click",trigger:".comet-edIconUpload","do":function(a,b){a.preventDefault();a.stopPropagation();var c=cometdata.svgSets,d;var g='<div id="comet-mipSearch"><select id="comet-mipFieldSwitchSet" class="comet-mipField comet-rendField">';
for(d in c)g+='<option value="'+d+'">'+c[d].name+"</option>";f.dialog.init({id:"comet-modalIconPicker",header:g+'</select><input id="comet-mipFieldSearchIcon" class="comet-mipField comet-rendField" value="" placeholder="Search an icon..." /></div>',content:'<div id="comet-mipResult"></div>',done:{target:".comet-mipCollectionScope","do":function(a,c){if("object"!==typeof c.dataset||cometUtils.eval.empty(c.dataset.id))return!1;var d=c.dataset.id.trim();var h=f.kit.icon(d);var g=m(b.parentNode).children(".comet-field");
g.val(d);m(b).replaceWith(h);f.updateComponent(g[0])}}});f.load.set("fas")}};a[a.length]={on:"change",trigger:"#comet-mipFieldSwitchSet","do":function(a,b){f.load.set(b.value)}};a[a.length]={on:"input propertychange",trigger:"#comet-mipFieldSearchIcon","do":function(a,b){var c=r.getElementById("comet-mipResult").getElementsByClassName("comet-mipCollectionScope"),d=b.value,g;if(!c||"object"!==typeof c||1>c.length)return!1;d=cometUtils.eval.empty(d)?"":d.trim();var e=new RegExp(d,"i");for(g=0;g<c.length;g++){var f=
c[g];"object"===typeof f.dataset&&"undefined"!==typeof f.dataset.id&&(""!==d&&-1===f.dataset.id.search(e)?f.style.display="none":f.style.display="inline-block")}}};a[a.length]={on:"click",trigger:".comet-edImageUpload","do":function(a,b){a.preventDefault();a.stopPropagation();var c;c?c.open():c=wp.media({frame:"select",title:cometdata.titles.selimg,library:{type:"image"},button:{text:cometdata.ui.select},multiple:!1,editing:!0,filterable:!0,searchable:!0,sortable:!0}).on("select",function(){var a=
b.parentNode;var d=c.state().get("selection").first().toJSON().url;var g=f.kit.image(d);a=m(a).children(".comet-field");a.val(d);m(b).replaceWith(g);f.updateComponent(a[0])}).open()}};a[a.length]={on:"click",trigger:".comet-edImageRemove, .comet-edIconRemove","do":function(a,b){a.preventDefault();a.stopPropagation();var c=b.parentNode,d=c.parentNode;var g=m(b).hasClass("comet-edImageRemove")?f.kit.image(""):f.kit.icon("");d=m(d).children(".comet-field");d.val("");m(c).replaceWith(g);f.updateComponent(d[0])}};
a[a.length]={on:"click",trigger:".comet-edModalItemDelete","do":function(a,b){a.preventDefault();var c=b.parentNode,d=parseInt(c.dataset.id);f.removeId(d,"items",q.id);f.removeMetaData(d,"items");m(c).remove()}};a[a.length]={on:"click",trigger:".comet-edModalItemEdit","do":function(a,b){a.preventDefault();var c=parseInt(b.parentNode.dataset.id),d=k.elements[q.id]._type;var g=f.buildTabs(cometdata.elements[d].tabs.items.tabs,k.items[c]);var e=cometdata.titles.editItem;q.state="items";q.item=c;var m=
{id:!1,title:e,close:{inner:'<span class="cico cico-arrow-left-alt"></span>',title:cometdata.ui.back,"do":function(a,c){var b=f.buildTabs(cometdata.elements[d].tabs,k.elements[q.id]),g=cometdata.options.element.edit;q.item=null;q.state=null;m={id:!1,title:g,close:{inner:'<span class="cico cico-x"></span>',title:cometdata.ui.close,"do":function(a,c){q.id=null;q.node=null;q.state=null;q.type=null;q.item=null;f.handleSize()}},content:b.content,tabs:b.tabs};f.modal(m);f.initModalParts()}},content:g.content,
tabs:g.tabs};f.modal(m);f.initModalParts()}};a[a.length]={on:"click",trigger:".comet-editorModalSectionHeader","do":function(a,b){a.preventDefault();f.toggle.accordion(b)}};a[a.length]={on:"click",trigger:".comet-modalTabRef","do":function(a,b){a.preventDefault();f.toggle.tabs(b)}};a[a.length]={on:"click",trigger:".comet-editorActConfirm, #comet-editorExit","do":function(a,b){a.preventDefault();var c=b.id;"comet-editorClear"===c?(c={message:cometdata.messages.clear,redirect:"#",onDone:function(){I.html("");
k={}}},f.confirm(c)):"comet-editorExit"===c&&(c={message:cometdata.messages.leave,redirect:cometdata.purl},f.confirm(c))}};a[a.length]={on:"click",trigger:".comet-mcItem","do":function(a,b){a.preventDefault();var c=b.parentNode,d=f.get.activeMenuButton(),g,e,p,n,t,r,x,z;f.toggle.menuComponent("close");if(f.node(d).isNode()&&"object"===typeof(g=d.parentNode)&&"object"===typeof c.dataset&&"undefined"!==typeof(e=c.dataset.action)&&"object"===typeof k&&"object"===typeof b.dataset&&"undefined"!==typeof(p=
b.dataset.role)){c=g;if(f.node(g).hasClass("cpb-element")){var v=g;c=v.parentNode.parentNode}d=c.parentNode;var A=d.parentNode;g=A.parentNode;var w=g.parentNode;switch(e){case "section":if("object"!==typeof w.dataset||"undefined"===typeof w.dataset.id||"number"!==typeof(x=parseInt(w.dataset.id))||isNaN(x)||"object"!==typeof k.sections||!(x in k.sections))return;if("edit"===p){e=cometdata.options.section.edit;q.id=x;q.type="sections";q.node=w;c=f.buildTabs(cometdata.section,k.sections[x]);break}else if("del"===
p)f.removeMetaData(x,"sections"),w.parentNode.removeChild(w);else if("dup"===p){c=f.initCloneMetaData(x,"sections",0);v=cometUtils.layout(k).section(c);if(!("object"===typeof v&&"html"in v&&"css"in v))return;f.insert.html(C,v);f.insert.css(c,"sections",v)}return;case "row":if("object"!==typeof A.dataset||"undefined"===typeof A.dataset.id||"number"!==typeof(r=parseInt(A.dataset.id))||isNaN(r)||"object"!==typeof k.rows||!(r in k.rows))return;if("edit"===p){e=cometdata.options.row.edit;q.id=r;q.type=
"rows";q.node=A;c=f.buildTabs(cometdata.row,k.rows[r]);break}else if("del"===p)f.removeMetaData(r,"rows"),A.parentNode.removeChild(A);else if("dup"===p){if("object"!==typeof w.dataset||"undefined"===typeof w.dataset.id||"number"!==typeof(x=parseInt(w.dataset.id))||isNaN(x))return;c=f.initCloneMetaData(r,"rows",x);v=cometUtils.layout(k).row(c);if(!("object"===typeof v&&"html"in v&&"css"in v))return;f.insert.html(g,v);f.insert.css(c,"rows",v)}return;case "column":if("object"!==typeof c.dataset||"undefined"===
typeof c.dataset.id||"number"!==typeof(t=parseInt(c.dataset.id))||isNaN(t)||"object"!==typeof k.columns||!(t in k.columns))return;if("edit"===p){e=cometdata.options.column.edit;q.id=t;q.type="columns";q.node=c;c=f.buildTabs(cometdata.column,k.columns[t]);break}else if("del"===p)f.removeMetaData(t,"columns"),d.removeChild(c),f.redefineColumns(d);else if("dup"===p){if("object"!==typeof A.dataset||"undefined"===typeof A.dataset.id||"number"!==typeof(r=parseInt(A.dataset.id))||isNaN(r))return;c=f.initCloneMetaData(t,
"columns",r);v=cometUtils.layout(k).column(c);if("object"!==typeof v)return;"html"in v&&f.insert.html(d,v);"css"in v&&f.insert.css(c,"columns",v);f.redefineColumns(d)}return;case "element":if("object"!==typeof v.dataset||"undefined"===typeof v.dataset.id||"number"!==typeof(n=parseInt(v.dataset.id))||isNaN(n)||"object"!==typeof k.elements||!(n in k.elements))return;if("edit"===p){if(!("_type"in k.elements[n])||"undefined"===typeof(z=k.elements[n]._type)||"object"!==typeof cometdata.elements[z]||"object"!==
typeof cometdata.elements[z].tabs)return;e=cometdata.options.element.edit;q.id=n;q.type="elements";q.node=v;c=f.buildTabs(cometdata.elements[z].tabs,k.elements[n]);break}else if("del"===p)f.removeMetaData(n,"elements"),m(v).remove();else if("dup"===p){if("object"!==typeof c.dataset||"undefined"===typeof c.dataset.id||"number"!==typeof(t=parseInt(c.dataset.id))||isNaN(t))return;n=f.initCloneMetaData(n,"elements",t);v=cometUtils.layout(k).element(n);if(!("object"===typeof v&&"html"in v&&"css"in v))return;
m(c).children(".cpb-columnContent").append(v.html);f.insert.css(n,"elements",v);cometUtils.init.icons();cometUtils.init.images()}return;default:return}"object"===typeof c&&"tabs"in c&&"content"in c&&(f.modal({id:!1,title:e,close:{inner:'<span class="cico cico-x"></span>',title:cometdata.ui.close,"do":function(a,c){q.id=null;q.node=null;q.state=null;q.type=null;f.toggle.editor("close");f.handleSize()}},content:c.content,tabs:c.tabs}),f.initModalParts())}}};a[a.length]={on:"input propertychange",trigger:".comet-field",
"do":function(a,b){f.updateComponent(b)}};a[a.length]={on:"click",trigger:".comet-menuComponentButton","do":function(a,b){a.preventDefault();var c="",d=f.node(b).hasClass("cpb-active"),g,e;f.closeOptions();if(!d&&"object"===typeof cometdata.options){d=f.node(b.parentNode).hasClass("cpb-element");f.node(b).addClass("cpb-active");var k=b.getBoundingClientRect();var m=k.top+k.height;var t=k.left;k=r.createElement("div");k.id="comet-menuComponent";k.className="comet-menuComponentOptions";k.style.top=
m+"px";k.style.left=t+"px";for(g in cometdata.options)if("element"!==g||d){m=cometdata.options[g];t="comet-mcList";t+=" comet-mcList"+cometUtils.generate.capitalize(g);c+='<div class="'+t+'">';c+='<div class="comet-mcListTitle">'+cometUtils.generate.capitalize(g.substr(0,1))+"</div>";c+='<div class="'+t+'" data-action="'+g.trim()+'">';for(e in m)t="comet-mcItem",t+=" comet-mcItem"+cometUtils.generate.capitalize(e),t+=" comet-mcItem"+cometUtils.generate.capitalize(e)+cometUtils.generate.capitalize(g),
c+='<button class="'+t+'" data-role="'+e.trim()+'">'+m[e]+"</button>";c+="</div>";c+="</div>"}k.innerHTML=c;r.body.appendChild(k)}}};var e=function(a){var d=null,c=null,e=!1,f,k;a.handle=a.handle||"";a.connectWith=a.connectWith||"ul";a.items=a.items||"li";a.placeholder=a.placeholder||"cpb-placeholderUi";a.cursor=a.cursor||null;a.containment=a.containment||"body";a.bodyClass=a.bodyClass||"cpb-sorting";var p='<div class="'+a.placeholder+'"></div>';var n='<div id="comet-uiCursor" class="'+a.cursor+'"><span class="cico cico-move"></span></div>';
var t=m(a.containment);var q=function(a){"destroy"===a&&null!==c?(m(c).remove(),c=null):"object"===typeof a&&(null===c&&(m("body").append(n),c=r.getElementById("comet-uiCursor")),null!==c&&(a.preventDefault(),m(c).css({left:a.pageX+"px",top:a.pageY+"px"})))};var x=function(a){a=a.split(",");var c,d;if("object"!==typeof a||!a.length||1>a.length)return!1;var b=[];for(c=d=0;c<a.length;c++){var e=a[c];if(!("string"!==typeof e||1>e.length)){e=e.trim();var g=e.substr(0,1);switch(g){case ".":g="class";break;
case "#":g="id";break;default:continue}e=e.substr(1);b[d]={};b[d].type=g;b[d].str=e;d++}}return b};var z={move:{on:"mousemove",trigger:r,"do":function(b,e){var g;if(null!==c&&null!==d){var h=x(a.connectWith);var f=x(a.items);var l=function(){var c=b.pageY;if(!t||!t.length||1>t.length)if(t=m(a.containment),!t||!t.length||1>t.length)return;clearInterval(k);var d=t.scrollTop();var e=t.outerHeight();isNaN(d)||isNaN(e)||isNaN(c)||(0<d&&10>c?(t.scrollTop(d-1),k=setInterval(l,1)):c+5>e&&(t.scrollTop(d+1),
k=setInterval(l,1)))};l();q(b);if("object"===typeof h&&h.length&&!(1>h.length)){for(g=0;g<h.length;g++){var n=h[g];if("object"===typeof n&&n.hasOwnProperty("type")&&n.hasOwnProperty("str")){var u=n.type;n=n.str;if("class"===u&&m(b.target).hasClass(n)||"id"===u&&b.target.id===n)if(u=m(b.target),n=u.children(a.items),!("object"===typeof n&&0<n.length)){(f=r.getElementsByClassName(a.placeholder))&&f.length&&0<f.length&&m(f).remove();u.prepend(p);return}}}if("object"===typeof f&&f.length&&!(1>f.length))for(g=
0;g<f.length;g++)if(h=f[g],"object"===typeof h&&h.hasOwnProperty("type")&&h.hasOwnProperty("str")&&(u=h.type,n=h.str,"class"===u&&m(b.target).hasClass(n)||"id"===u&&b.target.id===n)){u=m(b.target);h=u.outerHeight();n=h/2;var v=b.pageY-u.offset().top;var y=u.outerWidth();var A=y/4;var z=b.pageX-u.offset().left;m("."+a.placeholder).remove();if(z<=A||v<=n&&z>=A&&z<=y-A){u.before(p);break}(z>=y-A||v<=h&&v>n)&&u.after(p)}}}}},start:{on:"mousedown",trigger:a.handle,"do":function(c,b){var g;c.preventDefault();
f=setInterval(function(){d=b;q(c);0<a.bodyClass.trim().length&&m("body").addClass(a.bodyClass);"function"===typeof a.start&&(m(b).closest(a.items).after(p),g=a.start(c,b),"object"===typeof g&&(d=g));e=!0;clearInterval(f)},500)}},stop:{on:"mouseup",trigger:"html","do":function(c,b){c.preventDefault();clearInterval(f);clearInterval(k);if(e){0<a.bodyClass.trim().length&&m("body").removeClass(a.bodyClass);if("function"===typeof a.stop&&null!==d){var g=r.getElementsByClassName(a.placeholder);m(g).removeClass(a.placeholder).addClass("cpb-transientPlaceholder");
g=r.getElementsByClassName("cpb-transientPlaceholder");0<g.length&&a.stop(c,g[0],d)}0<g.length&&m(g).remove();d=null;q("destroy");e=!1}}}};for(b in z)(function(){var a=z[b];H.on(a.on,a.trigger,function(c){a["do"](c,this)})})(b)};e({handle:".comet-editorElement",connectWith:".cpb-columnContent",items:".cpb-element",placeholder:"cpb-edSortPlaceholder",cursor:"cpb-elementCursor",containment:"#cpb-content",start:function(){f.closeOptions()},stop:function(a,b,c){if("object"===typeof c&&"object"===typeof c.dataset&&
"undefined"!==typeof c.dataset.id){var d=c.dataset.id;if("undefined"!==typeof b.parentNode.parentNode.dataset&&"undefined"!==typeof b.parentNode.parentNode.dataset.id&&(c=parseInt(b.parentNode.parentNode.dataset.id),"number"===typeof c&&"object"===typeof k.columns&&"object"===typeof k.columns[c]&&(a=f.generateId("elements"),f.setDefaultData(a,d)))){d="last";b=m(b);var e=b.next(".cpb-element");0<e.length&&(d=parseInt(e.attr("data-id")),"number"!==typeof d||isNaN(d))&&(d="last");f.insertId(a,"elements",
c,d);a=cometUtils.layout(k).element(a);"object"===typeof a&&"html"in a&&"css"in a&&(b.parent().children(".comet-editorMenuOptions").remove(),b.replaceWith(a.html),cometUtils.init.icons(),cometUtils.init.images())}}}});e({handle:"#comet-editorAdd",connectWith:".cpb-rows, .cpb-rowContent, #cpb-content",items:".cpb-row, .cpb-column, .cpb-section",placeholder:"cpb-edPlaceholder",cursor:"cpb-elementCursor",containment:"#cpb-content",start:function(a,b,c){f.closeOptions()},stop:function(a,b,c){var d=!1;
c=a=!1;var e,g;var p=b.parentNode;m(p);var n=m(b);var r=function(a){a=n.next(a);var c="last";0<a.length&&(c=parseInt(a.attr("data-id")),"number"!==typeof c||isNaN(c))&&(c="last");return c};if("cpb-content"===p.id){b="sections";d=f.generateId(b);var q=f.setDefaultData(d,b);if(!q)return;f.insertId(d,b,0,r(".cpb-section"));b="rows";a=f.generateId(b);q=f.setDefaultData(a,b);if(!q)return;f.insertId(a,b,d,"last");b="columns";c=f.generateId(b);q=f.setDefaultData(c,b);if(!q)return;f.insertId(c,b,a,"last");
var x=cometUtils.layout(k).section(d)}else if(f.node(p).hasClass("cpb-rows")&&"number"===typeof(d=parseInt(p.parentNode.dataset.id))&&!isNaN(d)){b="rows";a=f.generateId(b);q=f.setDefaultData(a,b);if(!q)return;f.insertId(a,b,d,r(".cpb-row"));b="columns";c=f.generateId(b);q=f.setDefaultData(c,b);if(!q)return;f.insertId(c,b,a,"last");x=cometUtils.layout(k).row(a)}else if(f.node(p).hasClass("cpb-rowContent")&&"number"===typeof(a=parseInt(p.parentNode.dataset.id))&&!isNaN(a)){b="columns";c=f.generateId(b);
q=f.setDefaultData(c,b);if(!q)return!1;d=f.get.node.children(p,"cpb-column");var z=100;q=1;if(d&&"object"===typeof d&&"length"in d&&0<d.length)for(q=d.length+1,z=Number(100/q).toFixed(2),g=0;g<d.length;g++)(x=d[g])&&"object"===typeof x.dataset&&"id"in x.dataset&&"number"===typeof(e=parseInt(x.dataset.id))&&!isNaN(e)&&(k[b][e].wsize=z,x=cometUtils.layout(k,!0).column(e),"css"in x&&f.insert.css(e,"columns",x));k[b][c].wsize=z;f.insertId(c,b,a,r(".cpb-column"));x=cometUtils.layout(k).column(c);p.dataset.ncol=
q}else return!1;"object"===typeof x&&("html"in x&&n.replaceWith(x.html),"css"in x&&f.insert.css(c,"columns",x))}});e({handle:".comet-edModalItem",connectWith:".comet-edModalItems",items:".comet-edModalItem",placeholder:"cpb-edSortPlaceholder",cursor:"cpb-elementCursor",containment:".comet-modalContent",bodyClass:"cpb-sortingItem",start:function(a,b){var c;if(f.node(b).isNode()&&"object"===typeof b.dataset&&"id"in b.dataset&&"number"===typeof(c=parseInt(b.dataset.id))&&!isNaN(c))return b.style.visibility=
"hidden",b},stop:function(a,b,c){var d,e;c.removeAttribute("style");if(f.node(c).isNode()&&"object"===typeof c.dataset&&"id"in c.dataset&&"number"===typeof(d=parseInt(c.dataset.id))&&!isNaN(d)&&"id"in q&&"number"===typeof(e=parseInt(q.id))&&!isNaN(e)&&"object"===typeof k.elements&&"object"===typeof k.elements[e]){a="last";var g=m(b).next(".comet-edModalItem");0<g.length&&(a=parseInt(g.attr("data-id")),"number"!==typeof a||isNaN(a))&&(a="last");f.removeId(d,"items",e);f.insertId(d,"items",e,a);b.parentNode.replaceChild(c,
b);b=cometUtils.layout(k).iElement(e);"object"===typeof b&&"html"in b&&(q.node.innerHTML=b.html)}}});e({handle:".comet-mcItemMoveElement",connectWith:".cpb-columnContent",items:".cpb-element",placeholder:"cpb-edSortPlaceholder",cursor:"cpb-elementCursor",containment:"#cpb-content",start:function(a,b){var c=f.get.activeMenuButton(),d,e;f.closeOptions();if(f.node(c).isNode()&&f.node(c.parentNode).hasClass("cpb-element")&&"object"===typeof(d=c.parentNode).dataset&&"id"in d.dataset&&"number"===typeof(e=
parseInt(d.dataset.id))&&!isNaN(e))return d.style.visibility="hidden",d},stop:function(a,b,c){var d,e,g,p,n;f.node(c).isNode()&&"object"===typeof c.dataset&&"id"in c.dataset&&"number"===typeof(d=parseInt(c.dataset.id))&&!isNaN(d)&&f.node(c.parentNode).isNode()&&f.node(c.parentNode.parentNode).hasClass("cpb-column")&&"object"===typeof(e=c.parentNode.parentNode).dataset&&"id"in e.dataset&&"number"===typeof(g=parseInt(e.dataset.id))&&!isNaN(g)&&"object"===typeof k.columns&&"object"===typeof k.columns[g]&&
f.node(b.parentNode).isNode()&&f.node(b.parentNode.parentNode).hasClass("cpb-column")&&"object"===typeof(p=b.parentNode.parentNode).dataset&&"id"in p.dataset&&"number"===typeof(n=parseInt(p.dataset.id))&&!isNaN(n)&&(a="last",e=m(b).next(".cpb-element"),0<e.length&&(a=parseInt(e.attr("data-id")),"number"!==typeof a||isNaN(a))&&(a="last"),c.removeAttribute("style"),f.removeId(d,"elements",g),f.insertId(d,"elements",n,a),b.parentNode.replaceChild(c,b))}});e({handle:".comet-mcItemMoveColumn",connectWith:".cpb-rowContent",
items:".cpb-column",placeholder:"cpb-edSortPlaceholder",cursor:"cpb-elementCursor",containment:"#cpb-content",start:function(a,b){var c=f.get.activeMenuButton(),d;f.closeOptions();if(f.node(c).isNode()&&f.node(c.parentNode).isNode()){c=c.parentNode;if(!f.node(c).hasClass("cpb-column"))if(f.node(c).hasClass("cpb-element"))c=c.parentNode.parentNode;else return;if(f.node(c).isNode()&&"object"===typeof c.dataset&&"id"in c.dataset&&"number"===typeof(d=parseInt(c.dataset.id))&&!isNaN(d))return c.style.visibility=
"hidden",c}},stop:function(a,b,c){var d,e,g,p,n,q,r;f.node(c).isNode()&&"object"===typeof c.dataset&&"id"in c.dataset&&"number"===typeof(d=parseInt(c.dataset.id))&&!isNaN(d)&&f.node(g=c.parentNode).isNode()&&f.node(g.parentNode).isNode()&&"object"===typeof(e=g.parentNode).dataset&&"id"in e.dataset&&"number"===typeof(n=parseInt(e.dataset.id))&&!isNaN(n)&&"object"===typeof k.rows&&"object"===typeof k.rows[n]&&f.node(p=b.parentNode).isNode()&&f.node(p.parentNode).isNode()&&"object"===typeof(r=p.parentNode).dataset&&
"id"in r.dataset&&"number"===typeof(q=parseInt(r.dataset.id))&&!isNaN(q)&&(a="last",e=m(b).next(".cpb-column"),0<e.length&&(a=parseInt(e.attr("data-id")),"number"!==typeof a||isNaN(a))&&(a="last"),c.removeAttribute("style"),f.removeId(d,"columns",n),f.insertId(d,"columns",q,a),b.parentNode.replaceChild(c,b),n!==q&&(f.redefineColumns(g),f.redefineColumns(p)))}});e({handle:".comet-mcItemMoveRow",connectWith:".cpb-rows",items:".cpb-row",placeholder:"cpb-edSortPlaceholder",cursor:"cpb-elementCursor",
containment:"#cpb-content",start:function(a,b){var c=f.get.activeMenuButton(),d,e;f.closeOptions();if(f.node(c).isNode()&&f.node(c.parentNode).isNode()){c=c.parentNode;if(!f.node(c).hasClass("cpb-column"))if(f.node(c).hasClass("cpb-element"))c=c.parentNode.parentNode;else return;if(f.node(c.parentNode).isNode()&&f.node(c.parentNode.parentNode).isNode()&&f.node(c.parentNode.parentNode).hasClass("cpb-row")&&"object"===typeof(d=c.parentNode.parentNode).dataset&&"id"in d.dataset&&"number"===typeof(e=
parseInt(d.dataset.id))&&!isNaN(e))return d.style.visibility="hidden",d}},stop:function(a,b,c){var d,e,g,p,n;f.node(c).isNode()&&"object"===typeof c.dataset&&"id"in c.dataset&&"number"===typeof(d=parseInt(c.dataset.id))&&!isNaN(d)&&f.node(c.parentNode).isNode()&&f.node(c.parentNode.parentNode).isNode()&&"object"===typeof(e=c.parentNode.parentNode).dataset&&"id"in e.dataset&&"number"===typeof(g=parseInt(e.dataset.id))&&!isNaN(g)&&"object"===typeof k.sections&&"object"===typeof k.sections[g]&&f.node(b.parentNode).isNode()&&
f.node(b.parentNode.parentNode).isNode()&&"object"===typeof(p=b.parentNode.parentNode).dataset&&"id"in p.dataset&&"number"===typeof(n=parseInt(p.dataset.id))&&!isNaN(n)&&(a="last",e=m(b).next(".cpb-row"),0<e.length&&(a=parseInt(e.attr("data-id")),"number"!==typeof a||isNaN(a))&&(a="last"),c.removeAttribute("style"),f.removeId(d,"rows",g),f.insertId(d,"rows",n,a),b.parentNode.replaceChild(c,b))}});e({handle:".comet-mcItemMoveSection",connectWith:"#cpb-content",items:".cpb-section",placeholder:"cpb-edSortPlaceholder",
cursor:"cpb-elementCursor",containment:"#cpb-content",start:function(a,b){var c=f.get.activeMenuButton(),d,e;f.closeOptions();if(f.node(c).isNode()&&f.node(c.parentNode).isNode()){c=c.parentNode;if(!f.node(c).hasClass("cpb-column"))if(f.node(c).hasClass("cpb-element"))c=c.parentNode.parentNode;else return;if(f.node(c.parentNode).isNode()&&f.node(c.parentNode.parentNode).isNode()&&f.node(c.parentNode.parentNode.parentNode).isNode()&&f.node(c.parentNode.parentNode.parentNode.parentNode).isNode()&&f.node(c.parentNode.parentNode.parentNode.parentNode).hasClass("cpb-section")&&
"object"===typeof(d=c.parentNode.parentNode.parentNode.parentNode).dataset&&"id"in d.dataset&&"number"===typeof(e=parseInt(d.dataset.id))&&!isNaN(e))return d.style.visibility="hidden",d}},stop:function(a,b,c){var d;c.removeAttribute("style");if(f.node(c).isNode()&&"object"===typeof c.dataset&&"id"in c.dataset&&"number"===typeof(d=parseInt(c.dataset.id))&&!isNaN(d)&&"object"===typeof k.sections){a="last";var e=m(b).next(".cpb-section");0<e.length&&(a=parseInt(e.attr("data-id")),"number"!==typeof a||
isNaN(a))&&(a="last");f.removeId(d,"sections",d);f.insertId(d,"sections",d,a);b.parentNode.replaceChild(c,b)}}});a[a.length]={on:"click",trigger:".comet-modalFieldRadioWrap","do":function(a,b){var c=b.parentNode,d;if(!c||!c.children||"object"!==typeof c.children||1>c.children.length)return!1;c=c.children;for(d=0;d<c.length;d++){var e=c[d];"object"===typeof e&&(e=m(e),e.hasClass("comet-modalFieldRadioWrap")&&e.removeClass("cpb-active"))}m(b).addClass("cpb-active")}};a[a.length]={on:"click",trigger:"#comet-editorSidebarToggle",
"do":function(a,b){a.preventDefault();var c=m(b.parentNode.parentNode);c.hasClass("cpb-active")?(c.removeClass("cpb-active").find("#comet-elementPickerSearch").remove(),c=r.getElementsByClassName("comet-editorElement"),c.length&&m(c).show()):(c.addClass("cpb-active"),c='<div id="comet-elementPickerSearch"><input id="comet-elementPickerSearchInput" type="text" class="comet-rendField" value="" placeholder="'+cometdata.ui.search+'"/><span class="cico cico-search"></span></div>',m(b).after(c));f.handleSize()}};
a[a.length]={on:"input propertychange",trigger:"#comet-elementPickerSearchInput","do":function(a,b){a.preventDefault();var c=b.value,d=r.getElementsByClassName("comet-editorElement"),e;if(d.length){c=c.trim();var g=new RegExp(c,"i");for(e=0;e<d.length;e++){var f=d[e];if("undefined"!==typeof f.title&&"undefined"!==typeof f.dataset&&"undefined"!==typeof f.dataset.id){var k=f.title;cometUtils.eval.empty(c)||-1!==k.search(g)?f.style.display="inline-block":f.style.display="none"}}}}};f.gradient();f.range();
e=function(){var a=r.getElementsByClassName("comet-menuComponentButton"),b=r.getElementById("comet-menuComponent"),c,e;if(a&&"object"===typeof a&&"length"in a&&!(1>a.length)&&f.node(b).isNode()){for(c=0;c<a.length;c++){var k=a[c];f.node(k).isNode()&&f.node(k).hasClass("cpb-active")&&(e=k)}f.node(e).isNode()?(k=e.getBoundingClientRect(),a=k.top+k.height,k=k.left,b.style.top=a+"px",b.style.left=k+"px"):f.closeOptions()}};I.scroll(e);m(B).resize(e);for(b=0;b<a.length;b++)(function(){var d=a[b];H.on(d.on,
d.trigger,function(a){d["do"](a,this)})})(b)},confirm:function(a){var b=m("#comet-alertConfirm");b&&0<b.length&&b.remove();b='<div id="comet-alertConfirm"><div id="comet-alertConfirmModal">'+("<p>"+a.message+"</p>");b=b+'<div id="comet-alertConfirmButtonset">'+('<button class="comet-alertConfirmButton comet-button cancel">'+cometdata.ui.cancel+"</button>");b+='<a class="comet-alertConfirmButton comet-button comet-buttonPrimary done" href="'+a.redirect+'">'+cometdata.ui.done+"</a>";b+="</div></div></div>";
m("body").append(b);H.on("click",".comet-alertConfirmButton",function(b){var d=m(this);d.hasClass("cancel")?b.preventDefault():d.hasClass("done")&&a.hasOwnProperty("onDone")&&"function"===typeof a.onDone&&(b.preventDefault(),a.onDone());m("#comet-alertConfirm").remove()})},notification:function(a,b){var e=r.getElementById("comet-editorCockpit"),d=r.getElementById("comet-editorNotifications"),f=r.createElement("div");if(null==d||"object"!==typeof d||null==e||"object"!==typeof e)return!1;b=parseInt(b);
switch(b){case 0:case 400:b="error";break;default:b="success"}e.className="cpb-active";f.className="comet-notification "+b;f.innerHTML='<button class="comet-button comet-close comet-closeNote"><span class="cico cico-x"></span></button><p>'+a+"</p>";d.appendChild(f)}};m(function(){f.init()})});